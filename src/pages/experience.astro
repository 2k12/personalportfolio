---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
// import ExperienceList from "../components/Experience.astro"; // Usaremos una versión in-line más minimalista O adaptamos el componente.
// Para control total 'Ultra Minimalist', lo haré in-line aquí.

const EXPERIENCE = [
  {
    company: "Easy Ecommerce",
    role: "Full Stack Developer",
    date: "2023 - Presente",
    description: "Desarrollador Full Stack en Easy Ecommerce es una plataforma completa de comercio electrónico que ofrece a los usuarios la capacidad de crear, administrar y hacer crecer tiendas en línea de manera fácil y eficiente. Con una interfaz intuitiva y potentes herramientas integradas, Easy Ecommerce permite personalizar tiendas, gestionar inventarios y procesar pagos fácilmente.",
    tech: ["Flutter", "PHP", "Go", "Node JS"]
  },
  // {
  //   company: "TechSolutions Inc.",
  //   role: "Frontend Intern",
  //   date: "2023 - 2024",
  //   description: "Colaboración en el rediseño de la interfaz de usuario de la plataforma principal. Implementación de componentes accesibles.",
  //   tech: ["Vue", "TailwindCSS"]
  // },
  // {
  //   company: "Hackathon Winner",
  //   role: "Lead Developer",
  //   date: "2023",
  //   description: "Lideré el equipo de desarrollo para crear una solución de impacto social en 48 horas.",
  //   tech: ["Python", "React Native"]
  // }
];
---

<Layout
  title="Experience | Joan"
  description="My professional journey."
>
  <main class="bg-black min-h-screen relative w-full selection:bg-white selection:text-black">
    
    <div class="relative max-w-5xl mx-auto px-6 pt-32 pb-20 z-10">
      
      <!-- Minimalist Header -->
      <div class="mb-32 opacity-0 animate-title">
        <h1 class="text-[clamp(3.5rem,10vw,9rem)] font-bold text-white leading-[0.9] tracking-tighter">
          Experiencia
        </h1>
      </div>

      <!-- Experience Timeline (Ultra Minimal) -->
      <div class="relative border-l border-zinc-800 ml-2 md:ml-0 md:pl-10 space-y-20">
        
        {EXPERIENCE.map((exp, index) => (
            <div class="experience-item relative pl-8 md:pl-0 opacity-0">
                <!-- Dot visual -->
                <div class="absolute -left-[5px] md:-left-[45px] top-2 w-2.5 h-2.5 bg-white rounded-full ring-4 ring-black"></div>
                
                <div class="flex flex-col md:flex-row md:items-baseline md:justify-between gap-2 mb-4">
                    <h2 class="text-3xl md:text-5xl font-medium text-white tracking-tight">
                        {exp.company}
                    </h2>
                    <span class="font-mono text-zinc-500 text-sm md:text-base">{exp.date}</span>
                </div>

                <div class="md:grid md:grid-cols-4 gap-8">
                    <div class="col-span-1">
                        <span class="text-lg text-zinc-300 block mb-2">{exp.role}</span>
                        <div class="flex flex-wrap gap-2 mt-4">
                            {exp.tech.map(t => (
                                <span class="text-[10px] uppercase tracking-wider text-zinc-600 border border-zinc-800 px-2 py-1 rounded-full">{t}</span>
                            ))}
                        </div>
                    </div>
                    <div class="col-span-3 mt-4 md:mt-0">
                        <p class="text-zinc-400 leading-relaxed text-lg max-w-2xl">
                            {exp.description}
                        </p>
                    </div>
                </div>
            </div>
        ))}

      </div>

    </div>

  </main>
  <Footer />
</Layout>

<script>
  import { gsap } from "../animations/core";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);
  
  document.addEventListener("astro:page-load", () => {
    
    // 1. Reveal Title
    gsap.to(".animate-title", {
       opacity: 1,
       y: 0,
       duration: 1.2,
       ease: "power3.out"
    });

    // 2. Timeline Reveal
    const items = gsap.utils.toArray<HTMLElement>(".experience-item");
    items.forEach(item => {
        gsap.fromTo(item, 
            { opacity: 0, x: -30 },
            {
                opacity: 1,
                x: 0,
                duration: 1,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: item,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            }
        );
    });

  });
</script>
